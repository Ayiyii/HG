{"remainingRequest":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/correct/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/correct/list.vue","mtime":1619750284762},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nCmltcG9ydCBjb3JyZWN0QXBpIGZyb20gJ0AvYXBpL2NvcnJlY3QnCmltcG9ydCBxdWVzdGlvbkFwaSBmcm9tICdAL2FwaS9xdWVzdGlvbicKaW1wb3J0IHVzZXJBcGkgZnJvbSAnQC9hcGkvdXNlcicKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb259LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlQYXJhbTogewogICAgICAgIGV4YW1QYXBlcklkOm51bGwsCiAgICAgICAgY3JlYXRlVXNlcjpudWxsLAogICAgICAgIHN1YmplY3RJZDogbnVsbCwKICAgICAgICBwYWdlSW5kZXg6IDEsCiAgICAgICAgcGFnZVNpemU6IDEwCiAgICAgIH0sCiAgICAgIHN1YmplY3RGaWx0ZXI6IG51bGwsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB0b3RhbDogMCwKICAgICAgcXVlc3Rpb25TaG93OiB7CiAgICAgICAgcVR5cGU6IDAsCiAgICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgICBxdWVzdGlvbjogbnVsbCwKICAgICAgICBsb2FkaW5nOiBmYWxzZQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuaW5pdFN1YmplY3QoKQogICAgdGhpcy5zZWFyY2goKQogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybSAoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlSW5kZXggPSAxCiAgICAgIHRoaXMuc2VhcmNoKCkKICAgIH0sCiAgICBzZWFyY2ggKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICB2YXIgX3RoaXM9dGhpcwogICAgICBjb3JyZWN0QXBpLmNvcnJlY3RMaXN0KHRoaXMucXVlcnlQYXJhbSkudGhlbihkYXRhID0+IHsKICAgICAgICBjb25zdCByZSA9IGRhdGEucmVzcG9uc2UKICAgICAgICBjb25zb2xlLmxvZyhyZSkKICAgICAgICBmb3IobGV0IGk9MDtpPHJlLmxpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICB1c2VyQXBpLnNlbGVjdFVzZXIocmUubGlzdFtpXS51c2VySWQpLnRoZW4oZGF0YT0+ewogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgICAgX3RoaXMudGFibGVEYXRhW2ldLm5hbWU9ZGF0YS5yZXNwb25zZS5yZWFsTmFtZQogICAgICAgICAgICAvL3RoaXMudGFibGVEYXRhW2ldLm5hbWU9ZGF0YS5yZXNwb25zZS5yZWFsTmFtZQogICAgICAgICAgICB0aGlzLiRzZXQoX3RoaXMudGFibGVEYXRhLCBpLCBfdGhpcy50YWJsZURhdGFbaV0pCgogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIHRoaXMudGFibGVEYXRhID0gcmUubGlzdAogICAgICAgIHRoaXMudG90YWwgPSByZS50b3RhbAogICAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlSW5kZXggPSByZS5wYWdlTnVtCiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgbGV2ZWxDaGFuZ2UgKCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW0uc3ViamVjdElkID0gbnVsbAogICAgICB0aGlzLnN1YmplY3RGaWx0ZXIgPSB0aGlzLnN1YmplY3RzLmZpbHRlcihkYXRhID0+IGRhdGEubGV2ZWwgPT09IHRoaXMucXVlcnlQYXJhbS5sZXZlbCkKICAgIH0sCiAgICBhZGRRdWVzdGlvbiAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZXhhbS9xdWVzdGlvbi9lZGl0L3NpbmdsZUNob2ljZScpCiAgICB9LAogICBzaG93UXVlc3Rpb24gKHJvdykgewogICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgIHRoaXMucXVlc3Rpb25TaG93LmRpYWxvZyA9IHRydWUKICAgICAgdGhpcy5xdWVzdGlvblNob3cubG9hZGluZyA9IHRydWUKICAgICAgcXVlc3Rpb25BcGkuc2VsZWN0KHJvdy5pZCkudGhlbihyZSA9PiB7CiAgICAgICAgX3RoaXMucXVlc3Rpb25TaG93LnFUeXBlID0gcmUucmVzcG9uc2UucXVlc3Rpb25UeXBlCiAgICAgICAgX3RoaXMucXVlc3Rpb25TaG93LnF1ZXN0aW9uID0gcmUucmVzcG9uc2UKICAgICAgICBfdGhpcy5xdWVzdGlvblNob3cubG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgZWRpdFF1ZXN0aW9uIChyb3cpIHsKICAgICAgbGV0IHVybCA9IHRoaXMuZW51bUZvcm1hdCh0aGlzLmVkaXRVcmxFbnVtLCByb3cucXVlc3Rpb25UeXBlKQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHVybCwgcXVlcnk6IHsgaWQ6IHJvdy5pZCB9IH0pCiAgICB9LAogICAgZGVsZXRlUXVlc3Rpb24gKHJvdykgewogICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgIHF1ZXN0aW9uQXBpLmRlbGV0ZVF1ZXN0aW9uKHJvdy5pZCkudGhlbihyZSA9PiB7CiAgICAgICAgaWYgKHJlLmNvZGUgPT09IDEpIHsKICAgICAgICAgIF90aGlzLnNlYXJjaCgpCiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlLm1lc3NhZ2UpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIHF1ZXN0aW9uVHlwZUZvcm1hdHRlciAocm93LCBjb2x1bW4sIGNlbGxWYWx1ZSwgaW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMuZW51bUZvcm1hdCh0aGlzLnF1ZXN0aW9uVHlwZSwgY2VsbFZhbHVlKQogICAgfSwKICAgIHN1YmplY3RGb3JtYXR0ZXIgKHJvdywgY29sdW1uLCBjZWxsVmFsdWUsIGluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLnN1YmplY3RFbnVtRm9ybWF0KGNlbGxWYWx1ZSkKICAgIH0sCiAgICAuLi5tYXBBY3Rpb25zKCdleGFtJywgeyBpbml0U3ViamVjdDogJ2luaXRTdWJqZWN0JyB9KQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoJ2VudW1JdGVtJywgWydlbnVtRm9ybWF0J10pLAogICAgLi4ubWFwU3RhdGUoJ2VudW1JdGVtJywgewogICAgICBxdWVzdGlvblR5cGU6IHN0YXRlID0+IHN0YXRlLmV4YW0ucXVlc3Rpb24udHlwZUVudW0sCiAgICAgIGVkaXRVcmxFbnVtOiBzdGF0ZSA9PiBzdGF0ZS5leGFtLnF1ZXN0aW9uLmVkaXRVcmxFbnVtLAogICAgICBsZXZlbEVudW06IHN0YXRlID0+IHN0YXRlLnVzZXIubGV2ZWxFbnVtCiAgICB9KSwKICAgIC4uLm1hcEdldHRlcnMoJ2V4YW0nLCBbJ3N1YmplY3RFbnVtRm9ybWF0J10pLAogICAgLi4ubWFwU3RhdGUoJ2V4YW0nLCB7IHN1YmplY3RzOiBzdGF0ZSA9PiBzdGF0ZS5zdWJqZWN0cyB9KQogIH0KfQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/correct","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParam\" ref=\"queryForm\" :inline=\"true\">\n      <el-form-item label=\"试卷ID：\">\n        <el-input v-model=\"queryParam.id\" clearable></el-input>\n      </el-form-item>\n      <el-form-item label=\"班级：\">\n        <el-select v-model=\"queryParam.level\" placeholder=\"班级\"  @change=\"levelChange\" clearable>\n          <el-option v-for=\"item in levelEnum\" :key=\"item.key\" :value=\"item.key\" :label=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>\n   <el-form-item label=\"课程：\">\n        <el-select v-model=\"queryParam.subjectId\" clearable>\n          <el-option v-for=\"item in subjectFilter\" :key=\"item.id\" :value=\"item.id\"\n                     :label=\"item.name+' ( '+item.levelName+' )'\"></el-option>\n        </el-select>\n      </el-form-item>\n         <!--<el-form-item label=\"题型：\">\n        <el-select v-model=\"queryParam.questionType\" clearable>\n          <el-option v-for=\"item in questionType\" :key=\"item.key\" :value=\"item.key\" :label=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>-->\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">查询</el-button>\n        <el-popover placement=\"bottom\" trigger=\"click\">\n          <el-button type=\"warning\" size=\"mini\" v-for=\"item in editUrlEnum\" :key=\"item.key\"\n                     @click=\"$router.push({path:item.value})\">{{item.name}}\n          </el-button>\n         <!-- <el-button slot=\"reference\" type=\"primary\" class=\"link-left\">添加</el-button>-->\n        </el-popover>\n      </el-form-item>\n    </el-form>\n    <el-table v-loading=\"listLoading\" :data=\"tableData\" border fit highlight-current-row style=\"width: 100%\">\n      <el-table-column prop=\"id\" label=\"Id\" width=\"90px\"/>\n      <el-table-column prop=\"paperName\" label=\"试卷名称\" />\n      <el-table-column prop=\"subjectName\" label=\"学科\" />\n      <el-table-column prop=\"userId\" label=\"学生id\" />\n      <el-table-column prop=\"name\" label=\"学生名字\" />\n      <!--   <el-table-column prop=\"shortTitle\" label=\"状态\" />\n   <el-table-column prop=\"score\" label=\"分数\" width=\"60px\"/>\n      <el-table-column prop=\"difficult\" label=\"难度\" width=\"60px\"/>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160px\"/>-->\n      <el-table-column label=\"操作\" align=\"center\" width=\"220px\">\n        <template slot-scope=\"{row}\">\n               <router-link  :to=\"{path:'/correct',query:{id:row.id}}\" v-if=\"row.status === 1 \">\n                 <el-button   size=\"small\" >批改</el-button>\n               </router-link>\n               <router-link target=\"_blank\" :to=\"{path:'/read',query:{id:row.id}}\" v-if=\"row.status === 2 \">\n                 <el-button   size=\"small\">查看试卷</el-button>\n               </router-link>\n             </template>\n       <!-- <template slot-scope=\"{row}\">\n             <el-button size=\"mini\"   @click=\"showQuestion(row)\">批改</el-button>\n      <el-button size=\"mini\"  @click=\"editQuestion(row)\">批改</el-button>\n          <el-button size=\"mini\"  type=\"danger\" @click=\"deleteQuestion(row)\" class=\"link-left\">删除</el-button>\n        \n        </template>-->\n      </el-table-column>\n    </el-table>\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParam.pageIndex\" :limit.sync=\"queryParam.pageSize\"\n                @pagination=\"search\"/>\n    <el-dialog :visible.sync=\"questionShow.dialog\" style=\"width: 100%;height: 100%\">\n      <QuestionShow :qType=\"questionShow.qType\" :question=\"questionShow.question\" :qLoading=\"questionShow.loading\"/>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState, mapActions } from 'vuex'\nimport Pagination from '@/components/Pagination'\nimport correctApi from '@/api/correct'\nimport questionApi from '@/api/question'\nimport userApi from '@/api/user'\n\nexport default {\n  components: { Pagination},\n  data () {\n    return {\n      queryParam: {\n        examPaperId:null,\n        createUser:null,\n        subjectId: null,\n        pageIndex: 1,\n        pageSize: 10\n      },\n      subjectFilter: null,\n      listLoading: true,\n      tableData: [],\n      total: 0,\n      questionShow: {\n        qType: 0,\n        dialog: false,\n        question: null,\n        loading: false\n      }\n    }\n  },\n  created () {\n    this.initSubject()\n    this.search()\n  },\n  methods: {\n    submitForm () {\n      this.queryParam.pageIndex = 1\n      this.search()\n    },\n    search () {\n      this.listLoading = true\n      var _this=this\n      correctApi.correctList(this.queryParam).then(data => {\n        const re = data.response\n        console.log(re)\n        for(let i=0;i<re.list.length;i++){\n          userApi.selectUser(re.list[i].userId).then(data=>{\n            console.log(data);\n            _this.tableData[i].name=data.response.realName\n            //this.tableData[i].name=data.response.realName\n            this.$set(_this.tableData, i, _this.tableData[i])\n\n          })\n        }\n      this.tableData = re.list\n        this.total = re.total\n        this.queryParam.pageIndex = re.pageNum\n        this.listLoading = false\n      })\n    },\n    levelChange () {\n      this.queryParam.subjectId = null\n      this.subjectFilter = this.subjects.filter(data => data.level === this.queryParam.level)\n    },\n    addQuestion () {\n      this.$router.push('/exam/question/edit/singleChoice')\n    },\n   showQuestion (row) {\n      let _this = this\n      this.questionShow.dialog = true\n      this.questionShow.loading = true\n      questionApi.select(row.id).then(re => {\n        _this.questionShow.qType = re.response.questionType\n        _this.questionShow.question = re.response\n        _this.questionShow.loading = false\n      })\n    },\n    editQuestion (row) {\n      let url = this.enumFormat(this.editUrlEnum, row.questionType)\n      this.$router.push({ path: url, query: { id: row.id } })\n    },\n    deleteQuestion (row) {\n      let _this = this\n      questionApi.deleteQuestion(row.id).then(re => {\n        if (re.code === 1) {\n          _this.search()\n          _this.$message.success(re.message)\n        } else {\n          _this.$message.error(re.message)\n        }\n      })\n    },\n    questionTypeFormatter (row, column, cellValue, index) {\n      return this.enumFormat(this.questionType, cellValue)\n    },\n    subjectFormatter (row, column, cellValue, index) {\n      return this.subjectEnumFormat(cellValue)\n    },\n    ...mapActions('exam', { initSubject: 'initSubject' })\n  },\n  computed: {\n    ...mapGetters('enumItem', ['enumFormat']),\n    ...mapState('enumItem', {\n      questionType: state => state.exam.question.typeEnum,\n      editUrlEnum: state => state.exam.question.editUrlEnum,\n      levelEnum: state => state.user.levelEnum\n    }),\n    ...mapGetters('exam', ['subjectEnumFormat']),\n    ...mapState('exam', { subjects: state => state.subjects })\n  }\n}\n</script>\n"]}]}