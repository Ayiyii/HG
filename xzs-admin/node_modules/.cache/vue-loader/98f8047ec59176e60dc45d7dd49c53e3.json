{"remainingRequest":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/exam/paper/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/exam/paper/list.vue","mtime":1620638340727},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nCmltcG9ydCBleGFtUGFwZXJBcGkgZnJvbSAnQC9hcGkvZXhhbVBhcGVyJwoKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb24gfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHF1ZXJ5UGFyYW06IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBsZXZlbDogbnVsbCwKICAgICAgICBzdWJqZWN0SWQ6IG51bGwsCiAgICAgICAgcGFnZUluZGV4OiAxLAogICAgICAgIHBhZ2VTaXplOiAxMAogICAgICB9LAogICAgICBzdWJqZWN0RmlsdGVyOiBudWxsLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdG90YWw6IDAKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5pbml0U3ViamVjdCgpCiAgICB0aGlzLnNlYXJjaCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRGb3JtICgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtLnBhZ2VJbmRleCA9IDEKICAgICAgdGhpcy5zZWFyY2goKQogICAgfSwKICAgIHNlYXJjaCAoKSB7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlCiAgICAgIGV4YW1QYXBlckFwaS5wYWdlTGlzdCh0aGlzLnF1ZXJ5UGFyYW0pLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgY29uc3QgcmUgPSBkYXRhLnJlc3BvbnNlCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZS5saXN0CiAgICAgICAgdGhpcy50b3RhbCA9IHJlLnRvdGFsCiAgICAgICAgdGhpcy5xdWVyeVBhcmFtLnBhZ2VJbmRleCA9IHJlLnBhZ2VOdW0KICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBkZWxldGVQYXBlciAocm93KSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l6K+V5Y23LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICBleGFtUGFwZXJBcGkuZGVsZXRlUGFwZXIocm93LmlkKS50aGVuKHJlID0+IHsKICAgICAgICBpZiAocmUuY29kZSA9PT0gMSkgewogICAgICAgICAgX3RoaXMuc2VhcmNoKCkKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZS5tZXNzYWdlKQogICAgICAgIH0KICAgICAgfSkKICAgICAgICAgIAogICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgICB9KTsgICAgICAgICAgCiAgICAgICAgfSk7CiAgICAgIAogICAgICAKICAgICAgCiAgICB9LAogICAgbGV2ZWxDaGFuZ2UgKCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW0uc3ViamVjdElkID0gbnVsbAogICAgICB0aGlzLnN1YmplY3RGaWx0ZXIgPSB0aGlzLnN1YmplY3RzLmZpbHRlcihkYXRhID0+IGRhdGEubGV2ZWwgPT09IHRoaXMucXVlcnlQYXJhbS5sZXZlbCkKICAgIH0sCiAgICBzdWJqZWN0Rm9ybWF0dGVyICAocm93LCBjb2x1bW4sIGNlbGxWYWx1ZSwgaW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdEVudW1Gb3JtYXQoY2VsbFZhbHVlKQogICAgfSwKICAgIC4uLm1hcEFjdGlvbnMoJ2V4YW0nLCB7IGluaXRTdWJqZWN0OiAnaW5pdFN1YmplY3QnIH0pCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycygnZW51bUl0ZW0nLCBbJ2VudW1Gb3JtYXQnXSksCiAgICAuLi5tYXBTdGF0ZSgnZW51bUl0ZW0nLCB7CiAgICAgIGxldmVsRW51bTogc3RhdGUgPT4gc3RhdGUudXNlci5sZXZlbEVudW0KICAgIH0pLAogICAgLi4ubWFwR2V0dGVycygnZXhhbScsIFsnc3ViamVjdEVudW1Gb3JtYXQnXSksCiAgICAuLi5tYXBTdGF0ZSgnZXhhbScsIHsgc3ViamVjdHM6IHN0YXRlID0+IHN0YXRlLnN1YmplY3RzIH0pCiAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/exam/paper","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParam\" ref=\"queryForm\" :inline=\"true\">\n    <!--  <el-form-item label=\"题目ID：\">\n        <el-input v-model=\"queryParam.id\" clearable></el-input>\n      </el-form-item>-->\n      <el-form-item label=\"班级：\">\n        <el-select v-model=\"queryParam.level\" placeholder=\"班级\" @change=\"levelChange\" clearable>\n          <el-option v-for=\"item in levelEnum\" :key=\"item.key\" :value=\"item.key\" :label=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"课程：\" >\n        <el-select v-model=\"queryParam.subjectId\"  clearable>\n          <el-option v-for=\"item in subjectFilter\" :key=\"item.id\" :value=\"item.id\" :label=\"item.name+' ( '+item.levelName+' )'\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">查询</el-button>\n        <router-link :to=\"{path:'/exam/paper/edit'}\" class=\"link-left\">\n          <el-button type=\"primary\">添加</el-button>\n        </router-link>\n      </el-form-item>\n    </el-form>\n    <el-table v-loading=\"listLoading\" :data=\"tableData\" border fit highlight-current-row style=\"width: 100%\">\n      <el-table-column prop=\"id\" label=\"Id\" width=\"90px\"/>\n      <el-table-column prop=\"subjectId\" label=\"课程\" :formatter=\"subjectFormatter\" width=\"120px\" />\n      <el-table-column prop=\"name\" label=\"试卷名称\"  />\n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"160px\"/>\n      <el-table-column  label=\"操作\" align=\"center\"  width=\"160px\">\n        <template slot-scope=\"{row}\">\n          <el-button size=\"mini\" @click=\"$router.push({path:'/exam/paper/edit',query:{id:row.id}})\" >编辑</el-button>\n          <el-button size=\"mini\" type=\"danger\"  @click=\"deletePaper(row)\" class=\"link-left\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParam.pageIndex\" :limit.sync=\"queryParam.pageSize\"\n                @pagination=\"search\"/>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState, mapActions } from 'vuex'\nimport Pagination from '@/components/Pagination'\nimport examPaperApi from '@/api/examPaper'\n\n\nexport default {\n  components: { Pagination },\n  data () {\n    return {\n      queryParam: {\n        id: null,\n        level: null,\n        subjectId: null,\n        pageIndex: 1,\n        pageSize: 10\n      },\n      subjectFilter: null,\n      listLoading: true,\n      tableData: [],\n      total: 0\n    }\n  },\n  created () {\n    this.initSubject()\n    this.search()\n  },\n  methods: {\n    submitForm () {\n      this.queryParam.pageIndex = 1\n      this.search()\n    },\n    search () {\n      this.listLoading = true\n      examPaperApi.pageList(this.queryParam).then(data => {\n        const re = data.response\n        this.tableData = re.list\n        this.total = re.total\n        this.queryParam.pageIndex = re.pageNum\n        this.listLoading = false\n      })\n    },\n    deletePaper (row) {\n      let _this = this\n      this.$confirm('此操作将永久删除该试卷, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          examPaperApi.deletePaper(row.id).then(re => {\n        if (re.code === 1) {\n          _this.search()\n          _this.$message({\n            type: 'success',\n            message: '删除成功!'\n          });\n        } else {\n          _this.$message.error(re.message)\n        }\n      })\n          \n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });          \n        });\n      \n      \n      \n    },\n    levelChange () {\n      this.queryParam.subjectId = null\n      this.subjectFilter = this.subjects.filter(data => data.level === this.queryParam.level)\n    },\n    subjectFormatter  (row, column, cellValue, index) {\n      return this.subjectEnumFormat(cellValue)\n    },\n    ...mapActions('exam', { initSubject: 'initSubject' })\n  },\n  computed: {\n    ...mapGetters('enumItem', ['enumFormat']),\n    ...mapState('enumItem', {\n      levelEnum: state => state.user.levelEnum\n    }),\n    ...mapGetters('exam', ['subjectEnumFormat']),\n    ...mapState('exam', { subjects: state => state.subjects })\n  }\n}\n</script>\n"]}]}