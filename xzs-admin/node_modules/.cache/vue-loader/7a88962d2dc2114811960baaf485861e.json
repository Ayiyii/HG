{"remainingRequest":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/user/student/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/user/student/edit.vue","mtime":1609922416770},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IHVzZXJBcGkgZnJvbSAnQC9hcGkvdXNlcicKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICB1c2VyTmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIHJlYWxOYW1lOiAnJywKICAgICAgICByb2xlOiAxLAogICAgICAgIHN0YXR1czogMSwKICAgICAgICBhZ2U6ICcnLAogICAgICAgIHNleDogJycsCiAgICAgICAgYmlydGhEYXk6IG51bGwsCiAgICAgICAgcGhvbmU6IG51bGwsCiAgICAgICAgdXNlckxldmVsOiBudWxsCiAgICAgIH0sCiAgICAgIGZvcm1Mb2FkaW5nOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VyTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICByZWFsTmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeecn+WunuWnk+WQjScsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICB1c2VyTGV2ZWw6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nlubTnuqcnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkCiAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICBpZiAoaWQgJiYgcGFyc2VJbnQoaWQpICE9PSAwKSB7CiAgICAgIF90aGlzLmZvcm1Mb2FkaW5nID0gdHJ1ZQogICAgICB1c2VyQXBpLnNlbGVjdFVzZXIoaWQpLnRoZW4ocmUgPT4gewogICAgICAgIF90aGlzLmZvcm0gPSByZS5yZXNwb25zZQogICAgICAgIF90aGlzLmZvcm1Mb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm0gKCkgewogICAgICBsZXQgX3RoaXMgPSB0aGlzCiAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuZm9ybUxvYWRpbmcgPSB0cnVlCiAgICAgICAgICB1c2VyQXBpLmNyZWF0ZVVzZXIodGhpcy5mb3JtKS50aGVuKGRhdGEgPT4gewogICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAxKSB7CiAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgX3RoaXMuZGVsQ3VycmVudFZpZXcoX3RoaXMpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCcvdXNlci9zdHVkZW50L2xpc3QnKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKQogICAgICAgICAgICAgIF90aGlzLmZvcm1Mb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgIF90aGlzLmZvcm1Mb2FkaW5nID0gZmFsc2UKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICByZXNldEZvcm0gKCkgewogICAgICBsZXQgbGFzdElkID0gdGhpcy5mb3JtLmlkCiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS5yZXNldEZpZWxkcygpCiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICB1c2VyTmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIHJlYWxOYW1lOiAnJywKICAgICAgICByb2xlOiAxLAogICAgICAgIHN0YXR1czogMSwKICAgICAgICBhZ2U6ICcnLAogICAgICAgIHNleDogJycsCiAgICAgICAgYmlydGhEYXk6IG51bGwsCiAgICAgICAgcGhvbmU6IG51bGwsCiAgICAgICAgdXNlckxldmVsOiBudWxsCiAgICAgIH0KICAgICAgdGhpcy5mb3JtLmlkID0gbGFzdElkCiAgICB9LAogICAgLi4ubWFwQWN0aW9ucygndGFnc1ZpZXcnLCB7IGRlbEN1cnJlbnRWaWV3OiAnZGVsQ3VycmVudFZpZXcnIH0pCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycygnZW51bUl0ZW0nLCBbCiAgICAgICdlbnVtRm9ybWF0JwogICAgXSksCiAgICAuLi5tYXBTdGF0ZSgnZW51bUl0ZW0nLCB7CiAgICAgIHNleEVudW06IHN0YXRlID0+IHN0YXRlLnVzZXIuc2V4RW51bSwKICAgICAgcm9sZUVudW06IHN0YXRlID0+IHN0YXRlLnVzZXIucm9sZUVudW0sCiAgICAgIHN0YXR1c0VudW06IHN0YXRlID0+IHN0YXRlLnVzZXIuc3RhdHVzRW51bSwKICAgICAgbGV2ZWxFbnVtOiBzdGF0ZSA9PiBzdGF0ZS51c2VyLmxldmVsRW51bQogICAgfSkKICB9Cn0K"},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/user/student","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-form :model=\"form\" ref=\"form\" label-width=\"100px\" v-loading=\"formLoading\" :rules=\"rules\">\n      <el-form-item label=\"用户名：\"  prop=\"userName\" required>\n        <el-input v-model=\"form.userName\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"密码：\"  required>\n        <el-input v-model=\"form.password\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"真实姓名：\" prop=\"realName\" required>\n        <el-input v-model=\"form.realName\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"年龄：\">\n        <el-input v-model=\"form.age\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"性别：\">\n        <el-select v-model=\"form.sex\" placeholder=\"性别\" clearable>\n          <el-option v-for=\"item in sexEnum\" :key=\"item.key\" :value=\"item.key\" :label=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"出生日期：\">\n        <el-date-picker v-model=\"form.birthDay\" type=\"date\" value-format=\"yyyy-MM-dd\" placeholder=\"选择日期\" />\n      </el-form-item>\n      <el-form-item label=\"手机：\">\n        <el-input v-model=\"form.phone\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"年级：\" prop=\"userLevel\" required>\n        <el-select v-model=\"form.userLevel\" placeholder=\"年级\">\n          <el-option v-for=\"item in levelEnum\" :key=\"item.key\" :value=\"item.key\" :label=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"状态：\" required>\n        <el-select v-model=\"form.status\" placeholder=\"状态\">\n          <el-option v-for=\"item in statusEnum\" :key=\"item.key\" :value=\"item.key\" :label=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">提交</el-button>\n        <el-button @click=\"resetForm\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState, mapActions } from 'vuex'\nimport userApi from '@/api/user'\n\nexport default {\n  data () {\n    return {\n      form: {\n        id: null,\n        userName: '',\n        password: '',\n        realName: '',\n        role: 1,\n        status: 1,\n        age: '',\n        sex: '',\n        birthDay: null,\n        phone: null,\n        userLevel: null\n      },\n      formLoading: false,\n      rules: {\n        userName: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        realName: [\n          { required: true, message: '请输入真实姓名', trigger: 'blur' }\n        ],\n        userLevel: [\n          { required: true, message: '请选择年级', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  created () {\n    let id = this.$route.query.id\n    let _this = this\n    if (id && parseInt(id) !== 0) {\n      _this.formLoading = true\n      userApi.selectUser(id).then(re => {\n        _this.form = re.response\n        _this.formLoading = false\n      })\n    }\n  },\n  methods: {\n    submitForm () {\n      let _this = this\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          this.formLoading = true\n          userApi.createUser(this.form).then(data => {\n            if (data.code === 1) {\n              _this.$message.success(data.message)\n              _this.delCurrentView(_this).then(() => {\n                _this.$router.push('/user/student/list')\n              })\n            } else {\n              _this.$message.error(data.message)\n              _this.formLoading = false\n            }\n          }).catch(e => {\n            _this.formLoading = false\n          })\n        } else {\n          return false\n        }\n      })\n    },\n    resetForm () {\n      let lastId = this.form.id\n      this.$refs['form'].resetFields()\n      this.form = {\n        id: null,\n        userName: '',\n        password: '',\n        realName: '',\n        role: 1,\n        status: 1,\n        age: '',\n        sex: '',\n        birthDay: null,\n        phone: null,\n        userLevel: null\n      }\n      this.form.id = lastId\n    },\n    ...mapActions('tagsView', { delCurrentView: 'delCurrentView' })\n  },\n  computed: {\n    ...mapGetters('enumItem', [\n      'enumFormat'\n    ]),\n    ...mapState('enumItem', {\n      sexEnum: state => state.user.sexEnum,\n      roleEnum: state => state.user.roleEnum,\n      statusEnum: state => state.user.statusEnum,\n      levelEnum: state => state.user.levelEnum\n    })\n  }\n}\n</script>\n"]}]}