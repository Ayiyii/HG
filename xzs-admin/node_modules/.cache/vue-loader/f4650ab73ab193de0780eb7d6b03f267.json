{"remainingRequest":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/grades/exam/exam.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/src/views/grades/exam/exam.vue","mtime":1619750310973},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cynthiachen/project/graduation_design/xzs/xzs-mysql/source/vue/xzs-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nCmltcG9ydCBleGFtUGFwZXJBcGkgZnJvbSAnQC9hcGkvZXhhbVBhcGVyJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgUGFnaW5hdGlvbiB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcXVlcnlQYXJhbTogewogICAgICAgZXhhbVBhcGVySWQ6JycsCiAgICAgICAgY3JlYXRlVXNlcjpudWxsLAogICAgICAgIHN1YmplY3RJZDogbnVsbCwKICAgICAgICBwYWdlSW5kZXg6IDEsCiAgICAgICAgcGFnZVNpemU6IDEwCiAgICAgIH0sCiAgICAgIGNlbnRlckRpYWxvZ1Zpc2libGU6ZmFsc2UsCiAgICAgIHN1YmplY3RGaWx0ZXI6IG51bGwsCiAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdG90YWw6IDAKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgbGV0IGlkPXRoaXMuJHJvdXRlLnF1ZXJ5LmlkCiAgICBjb25zb2xlLmxvZyhpZCkKICAgIGxldCBfdGhpcyA9IHRoaXMKICAgIGlmIChpZCAmJiBwYXJzZUludChpZCkgIT09IDApIHsKICAgICAgZXhhbVBhcGVyQXBpLnNlbGVjdFRhc2soaWQpLnRoZW4oZGF0YT0+ewogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgICAgY29uc3QgcmUgPSBkYXRhLnJlc3BvbnNlCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZS5wYXBlckl0ZW1zCiAgICAgICAgdGhpcy50b3RhbCA9IHJlLnRvdGFsCiAgICAgICAgdGhpcy5xdWVyeVBhcmFtLnBhZ2VJbmRleCA9IHJlLnBhZ2VOdW0KICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH1lbHNlewogICAgICB0aGlzLnNlYXJjaCgpCiAgICB9CiAgICB0aGlzLmluaXRTdWJqZWN0KCkKICAgIAogIH0sCiAgbWV0aG9kczogewogICAgc3VibWl0Rm9ybSAoKSB7CiAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlSW5kZXggPSAxCiAgICAgIHRoaXMuc2VhcmNoKCkKICAgIH0sCiAgICBzZWFyY2ggKCkgewogICAgIC8vIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlCiAgICAgICBleGFtUGFwZXJBcGkucGFnZUxpc3QodGhpcy5xdWVyeVBhcmFtKS50aGVuKGRhdGEgPT4gewogICAgICAgIGNvbnN0IHJlID0gZGF0YS5yZXNwb25zZQogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmUubGlzdAogICAgICAgIHRoaXMudG90YWwgPSByZS50b3RhbAogICAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlSW5kZXggPSByZS5wYWdlTnVtCiAgICAgICBmb3IobGV0IGk9MDtpPHJlLmxpc3QubGVuZ3RoO2krKyl7CiAgICAgICAgICAgdmFyIHNjb3JlTGlzdD1yZS5saXN0W2ldLnNjb3JlTGlzdDsKICAgICAgICAgIHZhciBudW09c2NvcmVMaXN0Lmxlbmd0aDsKICAgICAgICAgIAogICAgICAgICAgaWYobnVtPjApewogICAgICAgICAgICB2YXIgc3VtPXNjb3JlTGlzdC5yZWR1Y2UoKHByZSxjdXIpPT5wcmUrY3VyKQogICAgICAgICAgICB0aGlzLnRhYmxlRGF0YVtpXS5hdmVHcmFkZT1zdW0vbnVtOwogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhW2ldLmF2ZUdyYWRlPSdudWxsJwogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICB9CiAgICAgICAKICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBkZWxldGVQYXBlciAocm93KSB7CiAgICAgIGxldCBfdGhpcyA9IHRoaXMKICAgICAgZXhhbVBhcGVyQXBpLmRlbGV0ZVBhcGVyKHJvdy5pZCkudGhlbihyZSA9PiB7CiAgICAgICAgaWYgKHJlLmNvZGUgPT09IDEpIHsKICAgICAgICAgIF90aGlzLnNlYXJjaCgpCiAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlLm1lc3NhZ2UpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlLm1lc3NhZ2UpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGxldmVsQ2hhbmdlICgpIHsKICAgICAgdGhpcy5xdWVyeVBhcmFtLnN1YmplY3RJZCA9IG51bGwKICAgICAgdGhpcy5zdWJqZWN0RmlsdGVyID0gdGhpcy5zdWJqZWN0cy5maWx0ZXIoZGF0YSA9PiBkYXRhLmxldmVsID09PSB0aGlzLnF1ZXJ5UGFyYW0ubGV2ZWwpCiAgICB9LAogICAgc3ViamVjdEZvcm1hdHRlciAgKHJvdywgY29sdW1uLCBjZWxsVmFsdWUsIGluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLnN1YmplY3RFbnVtRm9ybWF0KGNlbGxWYWx1ZSkKICAgIH0sCiAgICAuLi5tYXBBY3Rpb25zKCdleGFtJywgeyBpbml0U3ViamVjdDogJ2luaXRTdWJqZWN0JyB9KQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoJ2VudW1JdGVtJywgWydlbnVtRm9ybWF0J10pLAogICAgLi4ubWFwU3RhdGUoJ2VudW1JdGVtJywgewogICAgICBsZXZlbEVudW06IHN0YXRlID0+IHN0YXRlLnVzZXIubGV2ZWxFbnVtCiAgICB9KSwKICAgIC4uLm1hcEdldHRlcnMoJ2V4YW0nLCBbJ3N1YmplY3RFbnVtRm9ybWF0J10pLAogICAgLi4ubWFwU3RhdGUoJ2V4YW0nLCB7IHN1YmplY3RzOiBzdGF0ZSA9PiBzdGF0ZS5zdWJqZWN0cyB9KQogIH0KfQo="},{"version":3,"sources":["exam.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"exam.vue","sourceRoot":"src/views/grades/exam","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :model=\"queryParam\" ref=\"queryForm\" :inline=\"true\">\n      <el-form-item label=\"试卷ID：\">\n        <el-input v-model=\"queryParam.examPaperId\" clearable></el-input>\n      </el-form-item>\n      <el-form-item label=\"班级：\">\n        <el-select v-model=\"queryParam.level\" placeholder=\"班级\" @change=\"levelChange\" clearable>\n          <el-option v-for=\"item in levelEnum\" :key=\"item.key\" :value=\"item.key\" :label=\"item.value\"></el-option>\n        </el-select>\n      </el-form-item>\n      <!--<el-form-item label=\"名字：\" >\n        <el-select v-model=\"queryParam.subjectId\"  clearable>\n          <el-option v-for=\"item in subjectFilter\" :key=\"item.id\" :value=\"item.id\" :label=\"item.name+' ( '+item.levelName+' )'\"></el-option>\n        </el-select>\n      </el-form-item>-->\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">查询</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table v-loading=\"listLoading\" :data=\"tableData\" border fit highlight-current-row style=\"width: 100%\">\n      <el-table-column prop=\"id\" label=\"Id\" width=\"90px\"/>\n     <el-table-column prop=\"subjectId\" label=\"课程\" :formatter=\"subjectFormatter\" width=\"120px\" />\n      <el-table-column prop=\"name\" label=\"试卷名称\"  />\n      <el-table-column prop=\"createTime\" label=\"完成情况\" width=\"160px\">\n        \n        <template slot-scope=\"{row}\">\n         <!--  <el-button size=\"mini\" @click=\"$router.push({path:'/exam/paper/edit',query:{id:row.id}})\" >查看</el-button>\n         <el-button size=\"mini\" type=\"danger\"  @click=\"deletePaper(row)\" class=\"link-left\">删除</el-button>-->\n         <el-button type=\"text\" @click=\"$router.push({path:'/examStudent',query:{id:row.id}})\">55/60</el-button>\n        </template>\n      </el-table-column>\n            <el-table-column prop=\"aveGrade\" label=\"平均分\"  />\n      <el-table-column  label=\"操作\" align=\"center\"  width=\"160px\">\n        <template slot-scope=\"{row}\">\n         <!--  <el-button size=\"mini\" @click=\"$router.push({path:'/exam/paper/edit',query:{id:row.id}})\" >查看</el-button>\n         <el-button size=\"mini\" type=\"danger\"  @click=\"deletePaper(row)\" class=\"link-left\">删除</el-button>-->\n         <el-button type=\"text\" @click=\"centerDialogVisible = true\">查看</el-button>\n\n        <el-dialog\n          title=\"提示\"\n          :visible.sync=\"centerDialogVisible\"\n          width=\"30%\"\n          center>\n          <span>平均分：</span>\n          <span>最高分：</span>\n          <span>最低分：</span>\n          <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"centerDialogVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"centerDialogVisible = false\">确 定</el-button>\n          </span>\n        </el-dialog>\n        </template>\n      </el-table-column>\n    </el-table>\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"queryParam.pageIndex\" :limit.sync=\"queryParam.pageSize\"\n                @pagination=\"search\"/>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState, mapActions } from 'vuex'\nimport Pagination from '@/components/Pagination'\nimport examPaperApi from '@/api/examPaper'\n\nexport default {\n  components: { Pagination },\n  data () {\n    return {\n      queryParam: {\n       examPaperId:'',\n        createUser:null,\n        subjectId: null,\n        pageIndex: 1,\n        pageSize: 10\n      },\n      centerDialogVisible:false,\n      subjectFilter: null,\n      listLoading: false,\n      tableData: [],\n      total: 0\n    }\n  },\n  created () {\n    let id=this.$route.query.id\n    console.log(id)\n    let _this = this\n    if (id && parseInt(id) !== 0) {\n      examPaperApi.selectTask(id).then(data=>{\n        console.log(data)\n        const re = data.response\n        this.tableData = re.paperItems\n        this.total = re.total\n        this.queryParam.pageIndex = re.pageNum\n        this.listLoading = false\n      })\n    }else{\n      this.search()\n    }\n    this.initSubject()\n    \n  },\n  methods: {\n    submitForm () {\n      this.queryParam.pageIndex = 1\n      this.search()\n    },\n    search () {\n     // this.listLoading = true\n       examPaperApi.pageList(this.queryParam).then(data => {\n        const re = data.response\n        this.tableData = re.list\n        this.total = re.total\n        this.queryParam.pageIndex = re.pageNum\n       for(let i=0;i<re.list.length;i++){\n           var scoreList=re.list[i].scoreList;\n          var num=scoreList.length;\n          \n          if(num>0){\n            var sum=scoreList.reduce((pre,cur)=>pre+cur)\n            this.tableData[i].aveGrade=sum/num;\n          }else{\n            this.tableData[i].aveGrade='null'\n          }\n          \n       }\n       \n        this.listLoading = false\n      })\n    },\n    deletePaper (row) {\n      let _this = this\n      examPaperApi.deletePaper(row.id).then(re => {\n        if (re.code === 1) {\n          _this.search()\n          _this.$message.success(re.message)\n        } else {\n          _this.$message.error(re.message)\n        }\n      })\n    },\n    levelChange () {\n      this.queryParam.subjectId = null\n      this.subjectFilter = this.subjects.filter(data => data.level === this.queryParam.level)\n    },\n    subjectFormatter  (row, column, cellValue, index) {\n      return this.subjectEnumFormat(cellValue)\n    },\n    ...mapActions('exam', { initSubject: 'initSubject' })\n  },\n  computed: {\n    ...mapGetters('enumItem', ['enumFormat']),\n    ...mapState('enumItem', {\n      levelEnum: state => state.user.levelEnum\n    }),\n    ...mapGetters('exam', ['subjectEnumFormat']),\n    ...mapState('exam', { subjects: state => state.subjects })\n  }\n}\n</script>\n"]}]}